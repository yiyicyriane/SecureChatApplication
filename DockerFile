# Use OpenJDK base image
FROM openjdk:20-jdk

# Install necessary dependencies for JavaFX (OpenJFX)
RUN apt-get update && apt-get install -y \
    libglu1-mesa \
    libxi6 \
    libxrender1 \
    libxrandr2 \
    libxtst6 \
    && rm -rf /var/lib/apt/lists/*

# Set working directory in container
WORKDIR /app

# Copy the pom.xml and source code to the container
COPY pom.xml .
COPY src /app/src

# Build the project with Maven
RUN mvn clean install

# Command to run the JavaFX application
CMD ["java", "-jar", "target/chatclient.jar"]
